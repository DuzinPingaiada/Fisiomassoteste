<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Font -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">

  <!-- Icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@phosphor-icons/web@2.1.1/src/regular/style.css">

  <link rel="shortcut icon" href="assets/favicon.svg" type="image/x-icon">

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">

  <title>Fisiomasso</title>


  <style>
    .agendamento {
  display: flex;
  justify-content: center;
  padding: 80px 20px;
  background: #f8f9fa;
}

.agendamento-box {
  background: white;
  padding: 40px;
  border-radius: 16px;
  width: 100%;
  max-width: 500px;
  box-shadow: 0 10px 40px rgba(0,0,0,0.05);
}

.agendamento h2 {
  text-align: center;
  margin-bottom: 30px;
  font-weight: 500;
}

.input-group {
  position: relative;
  margin-bottom: 20px;
}

.input-group input {
  width: 100%;
  padding: 14px;
  border: 1px solid #ddd;
  border-radius: 8px;
  outline: none;
}

select, input[type="date"] {
  width: 100%;
  padding: 14px;
  border: 1px solid #ddd;
  border-radius: 8px;
  margin-bottom: 20px;
}

#horariosContainer {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 10px;
  margin-bottom: 20px;
}

.horario-btn {
  padding: 12px;
  border-radius: 16px;
  border: 1px solid #E2E8F0;
  background: white;
  font-weight: 500;
  transition: 0.3s ease;
}

.horario-btn:hover {
  border-color: #0092B8;
  color: #0092B8;
}

.horario-btn.selected {
  background: #0092B8;
  color: white;
  border-color: #0092B8;
}

.horario-btn:disabled {
  opacity: 0.4;
  cursor: not-allowed;
}

button {
  padding: 14px;
  background: #111;
  color: white;
  border: none;
  border-radius: 8px;
  cursor: pointer;
}



select {
  appearance: none;
  -webkit-appearance: none;
  -moz-appearance: none;
  background-image: none;
}
  </style>

  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            inter: ['Inter', 'sans-serif'],
          },
          colors: {
            primary: '#0092B8',
            primaryHover: '#00A3CF',
            secondary: '#005F78',
          }
        }
      }
    }
  </script>

  <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
  <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/pt.js"></script>
</head>

<body class="font-inter bg-white flex flex-col items-center">

<!-- HEADER -->
<header class="fixed top-0 z-10 bg-white w-full flex justify-center">
  <nav class="w-full max-w-[1120px] flex items-center justify-between h-16 my-4 px-4">
    <img src="assets/Logofisiomasso.png" alt="Logo" class="w-[166px] h-[56px]">

    <ul class="hidden md:flex gap-12 text-[#45556C]">
      <li><a href="#">In√≠cio</a></li>
      <li><a href="#servicos">Servi√ßos</a></li>
      <li><a href="#sobre">Sobre</a></li>
    </ul>

    <a href="https://api.whatsapp.com/send?phone=5517981414835" 
      class="bg-primary hover:bg-primaryHover text-white px-6 py-2 rounded-full text-sm">
      Falar agora
    </a>
  </nav>
</header>

<main class="w-full flex flex-col items-center mt-[110px]">

<section class="w-full max-w-[1120px] flex flex-col md:flex-row px-4 mb-14 md:gap-[73px]">
  <div class="flex flex-col max-w-[626px]">
    <div class="bg-[#CEFAFE] px-4 py-2 rounded-lg w-fit flex items-center gap-2 my-[24px]">
      <i class="ph ph-star text-primary"></i>
      <span class="text-primary font-semibold">5.0 em avalia√ß√µes</span>
    </div>

    <h1 class="text-3xl md:text-5xl md:leading-[56px]">
      Fisioterapia especializada para sa√∫de, movimento e qualidade de vida
    </h1>

    <p class="text-[#62748E] text-lg mt-5 max-w-[547px]">
      Cuidamos do seu corpo unindo preven√ß√£o, reabilita√ß√£o e prepara√ß√£o f√≠sica.
    </p>

    <a href="https://api.whatsapp.com/send?phone=5517981414835">
      <button class="bg-primary hover:bg-primaryHover text-white px-8 py-4 rounded-full mt-8">
        FALAR AGORA
      </button>
    </a>
  </div>

  <img src="assets/IMGhero.png" class="w-full my-[24px] md:flex md:w-auto"/>
</section>

<section class="w-full bg-[#E2E8F0] py-14">
  <div class="max-w-[1120px] mx-auto flex flex-col md:flex-row gap-14 px-4">
    
    <div class="flex flex-col items-center text-center max-w-[344px] mx-auto">
      <div class="p-4 bg-white rounded-full border border-primary shadow-lg shadow-primary/30 max-h-[64px] w-[64px]">
        <i class="ph ph-certificate text-2xl text-primary"></i>
      </div>
      <h3 class="mt-4 text-xl font-semibold">Profissionais certificados</h3>
      <p class="mt-2 text-[#62748E] font-semibold max-w-[300px]">Contamos com um time de especialistas na √°rea</p>
    </div>

    <div class="flex flex-col items-center text-center max-w-[344px] mx-auto">
      <div class="p-4 bg-white rounded-full border border-primary shadow-lg shadow-primary/30 max-h-[64px] w-[64px]">
        <i class="ph ph-user-circle text-2xl text-primary"></i>
      </div>
      <h3 class="mt-4 text-xl font-semibold">Servi√ßos personalizados</h3>
      <p class="mt-2 text-[#62748E] font-semibold max-w-[276px]">Fazemos a Fisioterapia acontecer do seu jeito</p>
    </div>

    <div class="flex flex-col items-center text-center max-w-[344px] mx-auto">
      <div class="p-4 bg-white rounded-full border border-primary shadow-lg shadow-primary/30 max-h-[64px] w-[64px]">
        <i class="ph ph-house-line text-2xl text-primary"></i>
      </div>
      <h3 class="mt-4 text-xl font-semibold">Espa√ßo acolhedor</h3>
      <p class="mt-2 text-[#62748E] font-semibold max-w-[294px]">Temos um ambiente agrad√°vel para cuidar de voc√™</p>
    </div>

  </div>
</section>

<!-- SERVI√áOS -->
<section id="servicos" class="w-full bg-secondary py-14 flex flex-col items-center gap-14">

  <div class="w-[90%] max-w-[1120px] h-[420px] md:h-[670px] rounded-2xl border border-[#A2F4FD] bg-cover bg-center flex items-end p-6 md:p-14"
    style="background-image:url('assets/IMGreabilitacao.png')">
    <div class="text-white max-w-[490px]">
      <h2 class="text-2xl md:text-3xl mb-4">Reabilita√ß√£o e P√≥s Operat√≥rio</h2>
      <p>Trabalhamos para reduzir dores, evitar complica√ß√µes, recuperar movimentos e devolver autonomia.</p>
    </div>
  </div>

  <div class="w-[90%] max-w-[1120px] h-[420px] md:h-[670px] rounded-2xl border border-[#A2F4FD] bg-cover bg-center flex items-end p-6 md:p-14"
    style="background-image:url('assets/IMGfortalecimento.png')">
    <div class="text-white max-w-[490px]">
      <h2 class="text-2xl md:text-3xl mb-4">Fortalecimento</h2>
      <p>Melhora a estabilidade, resist√™ncia e controle,‚Ä®para preven√ß√£o de les√µes e reabilita√ß√£o funcional.</p>
    </div>
  </div>

  <div class="w-[90%] max-w-[1120px] h-[420px] md:h-[670px] rounded-2xl border border-[#A2F4FD] bg-cover bg-center flex items-end p-6 md:p-14"
    style="background-image:url('assets/IMGliberacao.png')">
    <div class="text-white max-w-[490px]">
      <h2 class="text-2xl md:text-3xl mb-4">Libera√ß√£o miofascial</h2>
      <p>Ideal para recupera√ß√£o muscular, preven√ß√£o de les√µes e melhora do desempenho f√≠sico.</p>
    </div>
  </div>

</section>

<section class="w-full py-24 bg-[#F7FBFD] flex justify-center">
  <div class="w-full max-w-[640px] bg-white rounded-[32px] shadow-[0_20px_60px_rgba(0,0,0,0.06)] p-12 border border-[#E6F4F8]">

    <div class="text-center mb-12">
      <span class="text-primary text-sm font-semibold tracking-wide uppercase">
        AGENDAMENTO ONLINE
      </span>
      <h2 class="text-3xl mt-4 font-semibold text-secondary">
        Agende sua Avalia√ß√£o
      </h2>
      <p class="text-[#62748E] mt-3 text-[15px]">
        Escolha o melhor dia e hor√°rio para cuidar da sua sa√∫de
      </p>
    </div>

    <form id="formAgendamento" class="space-y-6">

      <div>
        <label class="text-sm text-[#62748E]">Seu nome</label>
        <input type="text" id="nome" required
          class="w-full mt-2 px-4 py-3 border border-[#E2E8F0] rounded-2xl focus:ring-2 focus:ring-primary focus:border-primary focus:outline-none transition">
      </div>

      <div>
        <label class="text-sm text-[#62748E]">WhatsApp</label>
        <input type="tel" id="telefone" required
          class="w-full mt-2 px-4 py-3 border border-[#E2E8F0] rounded-2xl focus:ring-2 focus:ring-primary focus:border-primary focus:outline-none transition">
      </div>

      <div>
        <label class="text-sm text-[#62748E]">Servi√ßo</label>
        <select id="servico" required
          class="w-full mt-2 px-4 py-3 border border-[#E2E8F0] rounded-2xl focus:ring-2 focus:ring-primary focus:border-primary focus:outline-none transition">
           <option value="" disabled selected hidden>Selecione</option>
          <option value="Avalia√ß√£o Pr√©-Operat√≥rio">Avalia√ß√£o Pr√©-Operat√≥rio</option>
          <option value="Avalia√ß√£o P√≥s-Operat√≥rio">Avalia√ß√£o P√≥s-Operat√≥rio</option>
          <option value="Reabilita√ß√£o">Reabilita√ß√£o</option>
          <option value="Libera√ß√£o Miofascial">Libera√ß√£o Miofascial</option>
          <option value="Outros">Outros</option>
        </select>
      </div>

      <div>
      <label class="text-sm text-[#62748E]">Data</label>
      <input type="text" id="data" placeholder="Selecione a data"
        class="w-full mt-2 px-4 py-3 border border-[#E2E8F0] rounded-2xl focus:ring-2 focus:ring-primary focus:border-primary focus:outline-none transition">
      </div>

      <div>
        <p class="text-sm text-[#62748E] mb-4">Hor√°rios dispon√≠veis</p>
        <div id="horariosContainer" class="grid grid-cols-3 gap-4"></div>
      </div>

      <button type="submit"
        class="w-full py-4 mt-4 bg-primary hover:bg-primaryHover text-white font-medium rounded-2xl transition duration-300 shadow-md hover:shadow-lg">
        Confirmar Agendamento
      </button>

    </form>

    <p id="mensagem" class="text-center mt-6 text-sm font-medium"></p>

  </div>
</section>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { 
  getFirestore, 
  collection, 
  addDoc, 
  query, 
  where, 
  getDocs,
  updateDoc,
  doc
} from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSy....",
  authDomain: "fisiomasso.firebaseapp.com",
  projectId: "fisioterapia-agendamento",
  storageBucket: "fisiomasso.appspot.com",
  messagingSenderId: "928899499645",
  appId: "1:928899499645:web:e86a365a71c85f845c1314"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

// üî• CALEND√ÅRIO
flatpickr("#data", {
  locale: "pt",
  minDate: "today",
  dateFormat: "Y-m-d",
  disable: [
    function(date) {
      return (date.getDay() === 0 || date.getDay() === 6);
    }
  ],
  onChange: function(selectedDates, dateStr) {
    carregarHorarios(dateStr);
  }
});

let horarioSelecionado = null;

const form = document.getElementById("formAgendamento");
const horariosContainer = document.getElementById("horariosContainer");
const mensagem = document.getElementById("mensagem");

// üî• GERA HOR√ÅRIOS DIN√ÇMICOS
function gerarHorarios(dataSelecionada) {
  const diaSemana = new Date(dataSelecionada + "T00:00:00").getDay();
  let horarios = [];

  if (diaSemana >= 1 && diaSemana <= 4) {
    horarios = [
      "08:00","09:00","10:00","11:00",
      "15:00","16:00","17:00","18:00","19:00"
    ];
  }

  if (diaSemana === 5) {
    horarios = [
      "08:00","09:00","10:00","11:00",
      "15:00","16:00","17:00","18:00"
    ];
  }

  return horarios;
}

// üî• CARREGA HOR√ÅRIOS DISPON√çVEIS
async function carregarHorarios(data) {
  horariosContainer.innerHTML = "";
  horarioSelecionado = null;

  if (!data) return;

  const q = query(
    collection(db, "agendamentos"),
    where("data", "==", data)
  );

  const snapshot = await getDocs(q);

  // üî• agora ignora cancelados
  const ocupados = snapshot.docs
    .filter(docItem => docItem.data().status === "ativo")
    .map(docItem => docItem.data().horario);

  const horariosDoDia = gerarHorarios(data);

  horariosDoDia.forEach(h => {
    const btn = document.createElement("button");
    btn.type = "button";
    btn.innerText = h;
    btn.classList.add("horario-btn");

    if (ocupados.includes(h)) {
      btn.disabled = true;
      btn.style.opacity = "0.4";
      btn.style.cursor = "not-allowed";
    } else {
      btn.onclick = () => {
        document.querySelectorAll(".horario-btn")
          .forEach(b => b.classList.remove("selected"));
        btn.classList.add("selected");
        horarioSelecionado = h;
      };
    }

    horariosContainer.appendChild(btn);
  });
}

// üî• CANCELAR AGENDAMENTO
async function cancelarAgendamento(id) {
  await updateDoc(doc(db, "agendamentos", id), {
    status: "cancelado"
  });

  alert("Agendamento cancelado com sucesso!");
  carregarHorarios(document.getElementById("data").value);
}

// üî• REAGENDAR AGENDAMENTO
async function reagendarAgendamento(id, novaData, novoHorario) {
  await updateDoc(doc(db, "agendamentos", id), {
    data: novaData,
    horario: novoHorario,
    status: "ativo"
  });

  alert("Agendamento reagendado com sucesso!");
}

// üî• ENVIO DO FORMUL√ÅRIO
form.addEventListener("submit", async (e) => {
  e.preventDefault();

  if (!horarioSelecionado) {
    alert("Selecione um hor√°rio");
    return;
  }

  await addDoc(collection(db, "agendamentos"), {
    nome: document.getElementById("nome").value,
    telefone: document.getElementById("telefone").value,
    servico: document.getElementById("servico").value,
    data: document.getElementById("data").value,
    horario: horarioSelecionado,
    status: "ativo", // üî• novo campo
    criadoEm: new Date()
  });

  mensagem.innerText = "Agendamento confirmado com sucesso!";
  mensagem.style.color = "green";

  form.reset();
  horariosContainer.innerHTML = "";
  horarioSelecionado = null;
});
</script>

</section>

<!-- SOBRE -->
<section id="sobre" class="py-14 text-center max-w-[744px] w-[90%]">
  <span class="bg-[#CEFAFE] text-primary font-semibold px-4 py-2 rounded-lg">
    Sobre n√≥s
  </span>

  <h2 class="text-4xl md:text-5xl mt-6">Conhe√ßa a Fisiomasso</h2>

  <p class="mt-5 text-[#62748E] md:text-[18px] font-medium">
   H√° mais de 4 anos, acreditamos que movimento √© qualidade de vida. Nosso trabalho √© focado no cuidado individualizado, unindo fisioterapia, massoterapia e prepara√ß√£o f√≠sica para promover sa√∫de, preven√ß√£o e reabilita√ß√£o de forma completa e eficaz
  </p>

  <a href="https://api.whatsapp.com/send?phone=5517981414835">
      <button class="bg-primary hover:bg-primaryHover text-white px-8 py-4 rounded-full mt-8">
        FALAR AGORA
      </button>
  </a>
</section>

<!-- FOOTER -->
<footer class="py-10 text-center text-xs text-[#90A1B9]">
  <p>¬†¬© Fissiomasso, 2026. Todos os direitos reservados.</p>
  <p>R. S√£o Jo√£o, 29 - Patrimonio de S√£o Jo√£o Batista, Ol√≠mpia - SP, 15400-065</p>
</footer>

</main>
</body>
</html>